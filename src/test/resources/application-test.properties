# Test Configuration for FileMaker Demo API

# Use FileMaker database for testing (same as production)
spring.datasource.url=jdbc:filemaker://192.168.30.130/Contacts
spring.datasource.driver-class-name=com.filemaker.jdbc.Driver
spring.datasource.username=admin
spring.datasource.password=wakawaka
spring.datasource.type=org.apache.commons.dbcp2.BasicDataSource
spring.datasource.dbcp2.initial-size=1
spring.datasource.dbcp2.min-idle=1
spring.datasource.dbcp2.max-idle=5
spring.datasource.dbcp2.max-total=10

# FileMaker-specific validation query
spring.datasource.dbcp2.validation-query=SELECT * FROM FileMaker_Tables FETCH FIRST 1 ROWS ONLY
spring.datasource.dbcp2.test-on-borrow=true
spring.datasource.dbcp2.test-while-idle=true
spring.datasource.dbcp2.duration-between-eviction-runs=30000

# JPA/Hibernate Configuration for FileMaker
spring.jpa.database-platform=org.hibernate.community.dialect.FileMakerDialect
spring.jpa.hibernate.ddl-auto=none
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.community.dialect.FileMakerDialect

# Logging Configuration
logging.level.com.filemaker.demo=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.com.zaxxer.hikari=DEBUG

# Test-specific properties
spring.test.database.replace=none

# Server configuration
server.port=0
server.servlet.context-path=

# Jackson configuration
spring.jackson.serialization.write-dates-as-timestamps=false
spring.jackson.date-format=yyyy-MM-dd HH:mm:ss

# File upload settings
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB

# Swagger/OpenAPI configuration
springdoc.api-docs.path=/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
